{"api": "FileChannel.write", "question": "Reading Objects from Random Access File: I wrote a file using Java's FileChannel class that uses RandomAccessFiles. I wrote objects at various locations in the file. The objects were of variable sizes but all of the same class.Now I want to read from such a file. I dont want to have to specify the number of bytes to read. I want to be able to read the object directly using Object Input Stream. How to achieve this ? I have to use Random Access Files because I need to write to different positions in file. I am also recording in a separate data structure, the locations where objects have been written.", "code": "while(rbb.hasRemaining()) {\n        try{\n            fileChannel.writeLong(recordBytes.length);\n            fileChannel.write(rbb);\n        } catch {System.out.println(\"Something went wrong.\");}\n}", "explanation": "The simplest solution that comes to mind is to write out the length of the array before writing out the array itself. When reading the object, you first read the length. This'll tell you how many further bytes to read to get your object. Similarly to what you are already doing on the writing side, you could read the data into a byte[] and then use ByteArrayInputputStream and ObjectInputStream.", "origin": "https://stackoverflow.com/questions/7391017/", "rule": "Write data to a FileChannel using a ByteBuffer, and if an Exception occurs, catch it.\nWrite data to a FileChannel after obtaining the channel, and if an Exception arises, handle it by catching the Exception.\nWrite data to a FileChannel using a ByteBuffer, subsequently close it, and if an Exception is encountered, handle it by catching the Exception.\n"}